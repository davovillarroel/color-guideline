/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,uselessCode} checked by tsc
 */
import { Injectable, Inject } from '@angular/core';
import { BehaviorSubject } from 'rxjs';
import { NgexServiceConfig } from './ngex.config';
import * as i0 from "@angular/core";
import * as i1 from "./ngex.config";
export class Ngex {
    /**
     * @param {?} config
     */
    constructor(config) {
        this.config = config;
        this.storex = {};
        this.actions = [];
        this.statepv = new BehaviorSubject(this.storex);
        this.store = this.statepv.asObservable();
        this.state = this.store.subscribe((state) => { this.state = state; });
        if (config) {
            this.createStore(config.store);
            this.createActions(config.actions);
        }
    }
    /**
     * @param {?} store
     * @return {?}
     */
    createStore(store) {
        this.storex = store;
        this.statepv.next(this.storex);
    }
    /**
     * @param {?} actions
     * @return {?}
     */
    createActions(actions) {
        this.actions = actions(this.storex);
        this.statepv.next(this.storex);
    }
    /**
     * @param {?} type
     * @param {?=} val
     * @return {?}
     */
    emit(type, val = null) {
        this.actions.find((a) => {
            if (a.type === type) {
                return a.action(val);
            }
        });
        this.statepv.next(this.storex);
    }
}
Ngex.decorators = [
    { type: Injectable, args: [{
                providedIn: 'root'
            },] }
];
/** @nocollapse */
Ngex.ctorParameters = () => [
    { type: undefined, decorators: [{ type: Inject, args: [NgexServiceConfig,] }] }
];
/** @nocollapse */ Ngex.ngInjectableDef = i0.defineInjectable({ factory: function Ngex_Factory() { return new Ngex(i0.inject(i1.NgexServiceConfig)); }, token: Ngex, providedIn: "root" });
if (false) {
    /** @type {?} */
    Ngex.prototype.storex;
    /** @type {?} */
    Ngex.prototype.actions;
    /** @type {?} */
    Ngex.prototype.statepv;
    /** @type {?} */
    Ngex.prototype.store;
    /** @type {?} */
    Ngex.prototype.state;
    /** @type {?} */
    Ngex.prototype.config;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmdleC5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6Im5nOi8vbmdleC8iLCJzb3VyY2VzIjpbImxpYi9uZ2V4LnNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFBRSxVQUFVLEVBQVUsTUFBTSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzNELE9BQU8sRUFBYSxlQUFlLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDbEQsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sZUFBZSxDQUFDOzs7QUFRbEQsTUFBTTs7OztJQU9GLFlBQStDLE1BQWlCO1FBQWpCLFdBQU0sR0FBTixNQUFNLENBQVc7c0JBTjNDLEVBQUU7dUJBQ0QsRUFBRTt1QkFDRixJQUFJLGVBQWUsQ0FBTSxJQUFJLENBQUMsTUFBTSxDQUFDO3FCQUN2QyxJQUFJLENBQUMsT0FBTyxDQUFDLFlBQVksRUFBRTtxQkFDNUIsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQyxLQUFTLEVBQUUsRUFBRSxHQUFFLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFBLEVBQUMsQ0FBQztRQUd4RSxJQUFJLE1BQU0sRUFBRTtZQUNSLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQy9CLElBQUksQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1NBQ3RDO0tBQ0Y7Ozs7O0lBRUssV0FBVyxDQUFDLEtBQVM7UUFDekIsSUFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUM7UUFDcEIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDOzs7Ozs7SUFHM0IsYUFBYSxDQUFDLE9BQWdCO1FBQ2xDLElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUNwQyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7Ozs7Ozs7SUFHNUIsSUFBSSxDQUFDLElBQVcsRUFBQyxNQUFVLElBQUk7UUFDbEMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFLLEVBQUUsRUFBRTtZQUN4QixJQUFHLENBQUMsQ0FBQyxJQUFJLEtBQUssSUFBSSxFQUFDO2dCQUNoQixPQUFPLENBQUMsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUM7YUFDdkI7U0FDSixDQUFDLENBQUE7UUFDRixJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7Ozs7WUFuQ3RDLFVBQVUsU0FBQztnQkFDWixVQUFVLEVBQUUsTUFBTTthQUNqQjs7Ozs0Q0FVZ0IsTUFBTSxTQUFDLGlCQUFpQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUsT3B0aW9uYWwsSW5qZWN0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBPYnNlcnZhYmxlLEJlaGF2aW9yU3ViamVjdCB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgTmdleFNlcnZpY2VDb25maWcgfSBmcm9tICcuL25nZXguY29uZmlnJztcbmltcG9ydCB7IE5nZXhTdG9yZSB9IGZyb20gJy4vbmdleC5pbnRlcmZhY2UnO1xuXG5ASW5qZWN0YWJsZSh7XG5wcm92aWRlZEluOiAncm9vdCdcbn0pXG5cblxuZXhwb3J0IGNsYXNzIE5nZXgge1xuICAgIHByaXZhdGUgc3RvcmV4OmFueSA9IHt9O1xuICAgIHByaXZhdGUgYWN0aW9uczphbnkgPSBbXTtcbiAgICBwcml2YXRlIHN0YXRlcHY6YW55ID0gbmV3IEJlaGF2aW9yU3ViamVjdDxhbnk+KHRoaXMuc3RvcmV4KTtcbiAgICBwcml2YXRlIHN0b3JlOmFueSA9IHRoaXMuc3RhdGVwdi5hc09ic2VydmFibGUoKVxuICAgIHB1YmxpYyBzdGF0ZTphbnkgPSB0aGlzLnN0b3JlLnN1YnNjcmliZSgoc3RhdGU6YW55KSA9PiB7dGhpcy5zdGF0ZSA9IHN0YXRlfSk7ICAgIFxuXG4gICAgY29uc3RydWN0b3IoQEluamVjdChOZ2V4U2VydmljZUNvbmZpZykgcHJpdmF0ZSBjb25maWc6IE5nZXhTdG9yZSkge1xuICAgICAgICBpZiAoY29uZmlnKSB7IFxuICAgICAgICAgICAgdGhpcy5jcmVhdGVTdG9yZShjb25maWcuc3RvcmUpO1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVBY3Rpb25zKGNvbmZpZy5hY3Rpb25zKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVTdG9yZShzdG9yZTphbnkpe1xuICAgICAgICB0aGlzLnN0b3JleCA9IHN0b3JlO1xuICAgICAgICB0aGlzLnN0YXRlcHYubmV4dCh0aGlzLnN0b3JleCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjcmVhdGVBY3Rpb25zKGFjdGlvbnM6RnVuY3Rpb24pe1xuICAgICAgICB0aGlzLmFjdGlvbnMgPSBhY3Rpb25zKHRoaXMuc3RvcmV4KTtcbiAgICAgICAgdGhpcy5zdGF0ZXB2Lm5leHQodGhpcy5zdG9yZXgpO1xuICAgIH1cblxuICAgIHB1YmxpYyBlbWl0KHR5cGU6c3RyaW5nLHZhbDphbnkgPSBudWxsKXtcbiAgICAgICAgdGhpcy5hY3Rpb25zLmZpbmQoKGE6YW55KSA9PiB7XG4gICAgICAgICAgICBpZihhLnR5cGUgPT09IHR5cGUpe1xuICAgICAgICAgICAgICAgcmV0dXJuIGEuYWN0aW9uKHZhbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIHRoaXMuc3RhdGVwdi5uZXh0KHRoaXMuc3RvcmV4KTtcbiAgICB9XG59Il19